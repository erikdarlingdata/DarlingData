<img src="https://erikdarling.com/wp-content/uploads/2025/08/darling-data-logo_RGB.jpg" width="300px" />

# Install-All

This directory contains tools to merge all the Darling Data stored procedures into a single installation file.

## Overview

Instead of installing each stored procedure individually, you can use the comprehensive DarlingData.sql file to install all procedures at once. This file is automatically generated using the Merge-All.ps1 PowerShell script.

## Components

1. **DarlingData.sql**: A merged file containing all stored procedures from the repository
2. **Merge-All.ps1**: PowerShell script that generates the DarlingData.sql file

## Included Stored Procedures

The DarlingData.sql file includes all of the following stored procedures:

| Procedure | Description | Source |
|-----------|-------------|--------|
| [sp_HealthParser](../sp_HealthParser) | Analyzes the system health extended event for performance information | [Link](../sp_HealthParser) |
| [sp_HumanEvents](../sp_HumanEvents) | Makes extended events easy to use for common scenarios | [Link](../sp_HumanEvents) |
| [sp_HumanEventsBlockViewer](../sp_HumanEvents) | Analyzes blocked process reports | [Link](../sp_HumanEvents) |
| [sp_IndexCleanup](../sp_IndexCleanup) | Identifies unused and duplicate indexes | [Link](../sp_IndexCleanup) |
| [sp_LogHunter](../sp_LogHunter) | Searches SQL Server error logs for important messages | [Link](../sp_LogHunter) |
| [sp_PerfCheck](../sp_PerfCheck) | Comprehensive SQL Server performance health check | [Link](../sp_PerfCheck) |
| [sp_PressureDetector](../sp_PressureDetector) | Detects CPU and memory pressure in SQL Server | [Link](../sp_PressureDetector) |
| [sp_QuickieStore](../sp_QuickieStore) | Fast and configurable way to navigate Query Store data | [Link](../sp_QuickieStore) |

## Usage

### Using the Pre-Generated File

Simply run the DarlingData.sql script in SQL Server Management Studio to install all stored procedures at once.

### Generating a Fresh Copy

If you want to generate a fresh copy of the DarlingData.sql file:

1. Make sure you have PowerShell installed
2. Navigate to the Install-All directory in PowerShell
3. Run the script:

```powershell
.\Merge-All.ps1
```

The script will:
1. Find all sp_* directories
2. Skip sp_WhoIsActive directories
3. Get all sp_* files (skipping agent job files)
4. Combine them into a single file
5. Add a compile date header
6. Save as DarlingData.sql

## Note

The WhoIsActive Logging procedures are not included in this file, as they have a different installation process and depend on Adam Machanic's sp_WhoIsActive.

Copyright 2025 Darling Data, LLC  
Released under MIT license